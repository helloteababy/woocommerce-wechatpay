jQuery(function(t){function e(){var a={appId:""+wechatData.appId,timeStamp:""+wechatData.timeStamp,nonceStr:""+wechatData.nonceStr,package:""+wechatData.package,signType:"MD5",paySign:""+wechatData.paySign};t(".woowechatpay-loader").hide(),WeixinJSBridge.invoke("getBrandWCPayRequest",a,function(a){if(wechatData.debug&&window.alert("Debug mode active - redirection may fail."),"get_brand_wcpay_request:ok"===a.err_msg){var e={action:"woowechatpay_hold",key:wechatData.key,orderId:wechatData.orderId,blogId:wechatData.blogId};t.ajax({url:wechatData.ajax_url,data:e,type:"POST",success:function(a){a.success||window.alert(a.data[0].message)},error:function(a,e){wechatData.debug&&window.console.log(e)},complete:function(){window.location=wechatData.SuccessPayUrl}}),window.setTimeout(function(){window.location=wechatData.SuccessPayUrl},2e3)}else"get_brand_wcpay_request:cancel"===a.err_msg?window.location=wechatData.FailedPayUrl:"get_brand_wcpay_request:fail"===a.err_msg?(window.alert(wechatData.gatewayFail),history.back()):window.setTimeout(function(){history.back()},3e3)})}t(function(){var a;"failure"!==(a=wechatData).result?"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)):e():"failed"!==a.message&&(window.alert(a.message),history.back())})});